{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport createCategoryColorScale from '../../internal/utils/create-category-color-scale';\nexport default function createSeriesDecorator(externalSeries) {\n  var colorScale = createCategoryColorScale(externalSeries, function (s) {\n    return s.type === 'threshold';\n  }, function (s) {\n    return s.color || null;\n  });\n  var decorateSeries = function (s, index) {\n    var title = s.title;\n    var color = colorScale[index];\n    var markerType = s.type === 'area' ? 'hollow-rectangle' : 'dashed';\n    var formatValue = s.type === 'threshold' ? function () {\n      return s.valueFormatter ? s.valueFormatter(s.y) : s.y;\n    } : function (y, x) {\n      return s.valueFormatter ? s.valueFormatter(y, x) : y;\n    };\n    return {\n      series: s,\n      title: title,\n      color: color,\n      markerType: markerType,\n      formatValue: formatValue\n    };\n  };\n  // Map external series to internal ones.\n  var mapping = externalSeries.reduce(function (map, series, index) {\n    map.set(series, decorateSeries(series, index));\n    return map;\n  }, new Map());\n  // It is inconvenient to use internal series everywhere, that's\n  // why we also provide a decorator function to get the internal series on demand.\n  var seriesDecorator = function (series) {\n    return mapping.get(series) || decorateSeries(series, externalSeries.length);\n  };\n  return seriesDecorator;\n}","map":{"version":3,"mappings":"AAAA;AACA;AACA,OAAOA,wBAAwB,MAAM,kDAAkD;AAIvF,eAAc,SAAUC,qBAAqB,CAC3CC,cAAmD;EAEnD,IAAMC,UAAU,GAAGH,wBAAwB,CACzCE,cAAc,EACd,WAAC;IAAI,QAAC,CAACE,IAAI,KAAK,WAAW;EAAtB,CAAsB,EAC3B,WAAC;IAAI,QAAC,CAACC,KAAK,IAAI,IAAI;EAAf,CAAe,CACrB;EAED,IAAMC,cAAc,GAAG,UAACC,CAA2B,EAAEC,KAAa;IAChE,IAAMC,KAAK,GAAGF,CAAC,CAACE,KAAK;IACrB,IAAMJ,KAAK,GAAGF,UAAU,CAACK,KAAK,CAAC;IAC/B,IAAME,UAAU,GAAGH,CAAC,CAACH,IAAI,KAAK,MAAM,GAAG,kBAAkB,GAAG,QAAQ;IACpE,IAAMO,WAAW,GACfJ,CAAC,CAACH,IAAI,KAAK,WAAW,GAClB;MAAM,OAACG,CAAC,CAACK,cAAc,GAAGL,CAAC,CAACK,cAAc,CAACL,CAAC,CAACM,CAAC,CAAC,GAAGN,CAAC,CAACM,CAAC;IAA/C,CAAgD,GACtD,UAACA,CAAS,EAAEC,CAAI;MAAK,OAACP,CAAC,CAACK,cAAc,GAAGL,CAAC,CAACK,cAAc,CAACC,CAAC,EAAEC,CAAC,CAAC,GAAGD,CAAC;IAA9C,CAA+C;IAE1E,OAAO;MAAEE,MAAM,EAAER,CAAC;MAAEE,KAAK;MAAEJ,KAAK;MAAEK,UAAU;MAAEC,WAAW;IAAA,CAAE;EAC7D,CAAC;EAED;EACA,IAAMK,OAAO,GAAGd,cAAc,CAACe,MAAM,CAAC,UAACC,GAAG,EAAEH,MAAM,EAAEP,KAAK;IACvDU,GAAG,CAACC,GAAG,CAACJ,MAAM,EAAET,cAAc,CAACS,MAAM,EAAEP,KAAK,CAAC,CAAC;IAC9C,OAAOU,GAAG;EACZ,CAAC,EAAE,IAAIE,GAAG,EAA0D,CAAC;EAErE;EACA;EACA,IAAMC,eAAe,GAAG,UAACN,MAAgC;IACvD,cAAO,CAACO,GAAG,CAACP,MAAM,CAAC,IAAIT,cAAc,CAACS,MAAM,EAAEb,cAAc,CAACqB,MAAM,CAAC;EAApE,CAAoE;EAEtE,OAAOF,eAAe;AACxB","names":["createCategoryColorScale","createSeriesDecorator","externalSeries","colorScale","type","color","decorateSeries","s","index","title","markerType","formatValue","valueFormatter","y","x","series","mapping","reduce","map","set","Map","seriesDecorator","get","length"],"sources":["/Users/dcastro/node_modules/src/area-chart/model/create-series-decorator.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport createCategoryColorScale from '../../internal/utils/create-category-color-scale';\nimport { AreaChartProps } from '../interfaces';\nimport { ChartModel } from './index';\n\nexport default function createSeriesDecorator<T extends AreaChartProps.DataTypes>(\n  externalSeries: readonly AreaChartProps.Series<T>[]\n) {\n  const colorScale = createCategoryColorScale(\n    externalSeries,\n    s => s.type === 'threshold',\n    s => s.color || null\n  );\n\n  const decorateSeries = (s: AreaChartProps.Series<T>, index: number): ChartModel.InternalSeries<T> => {\n    const title = s.title;\n    const color = colorScale[index];\n    const markerType = s.type === 'area' ? 'hollow-rectangle' : 'dashed';\n    const formatValue =\n      s.type === 'threshold'\n        ? () => (s.valueFormatter ? s.valueFormatter(s.y) : s.y)\n        : (y: number, x: T) => (s.valueFormatter ? s.valueFormatter(y, x) : y);\n\n    return { series: s, title, color, markerType, formatValue };\n  };\n\n  // Map external series to internal ones.\n  const mapping = externalSeries.reduce((map, series, index) => {\n    map.set(series, decorateSeries(series, index));\n    return map;\n  }, new Map<AreaChartProps.Series<T>, ChartModel.InternalSeries<T>>());\n\n  // It is inconvenient to use internal series everywhere, that's\n  // why we also provide a decorator function to get the internal series on demand.\n  const seriesDecorator = (series: AreaChartProps.Series<T>): ChartModel.InternalSeries<T> =>\n    mapping.get(series) || decorateSeries(series, externalSeries.length);\n\n  return seriesDecorator;\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}