{"ast":null,"code":"import { __assign, __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\nimport clsx from 'clsx';\nimport { getBaseProps } from '../internal/base-component';\nimport { FormFieldContext, useFormFieldContext } from '../internal/context/form-field-context';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport InternalGrid from '../grid/internal';\nimport InternalIcon from '../icon/internal';\nimport { getAriaDescribedBy, getGridDefinition, getSlotIds } from './util';\nimport styles from './styles.css.js';\nimport { joinStrings } from '../internal/utils/strings';\nexport var FormFieldError = function (_a) {\n  var id = _a.id,\n    children = _a.children,\n    errorIconAriaLabel = _a.errorIconAriaLabel;\n  return React.createElement(\"div\", {\n    className: styles.error\n  }, React.createElement(\"div\", {\n    className: styles['error-icon-shake-wrapper']\n  }, React.createElement(\"div\", {\n    role: \"img\",\n    \"aria-label\": errorIconAriaLabel,\n    className: styles['error-icon-scale-wrapper']\n  }, React.createElement(InternalIcon, {\n    name: \"status-warning\",\n    size: \"small\"\n  }))), React.createElement(\"span\", {\n    id: id,\n    className: styles.error__message\n  }, children));\n};\nexport default function InternalFormField(_a) {\n  var controlId = _a.controlId,\n    _b = _a.stretch,\n    stretch = _b === void 0 ? false : _b,\n    label = _a.label,\n    info = _a.info,\n    i18nStrings = _a.i18nStrings,\n    children = _a.children,\n    secondaryControl = _a.secondaryControl,\n    description = _a.description,\n    constraintText = _a.constraintText,\n    errorText = _a.errorText,\n    __hideLabel = _a.__hideLabel,\n    _c = _a.__internalRootRef,\n    __internalRootRef = _c === void 0 ? null : _c,\n    rest = __rest(_a, [\"controlId\", \"stretch\", \"label\", \"info\", \"i18nStrings\", \"children\", \"secondaryControl\", \"description\", \"constraintText\", \"errorText\", \"__hideLabel\", \"__internalRootRef\"]);\n  var baseProps = getBaseProps(rest);\n  var isRefresh = useVisualRefresh();\n  var instanceUniqueId = useUniqueId('formField');\n  var generatedControlId = controlId || instanceUniqueId;\n  var formFieldId = controlId || generatedControlId;\n  var slotIds = getSlotIds(formFieldId, label, description, constraintText, errorText);\n  var ariaDescribedBy = getAriaDescribedBy(slotIds);\n  var gridDefinition = getGridDefinition(stretch, !!secondaryControl, isRefresh);\n  var _d = useFormFieldContext({}),\n    parentAriaLabelledby = _d.ariaLabelledby,\n    parentAriaDescribedby = _d.ariaDescribedby,\n    parentInvalid = _d.invalid;\n  var contextValuesWithoutControlId = {\n    ariaLabelledby: joinStrings(parentAriaLabelledby, slotIds.label) || undefined,\n    ariaDescribedby: joinStrings(parentAriaDescribedby, ariaDescribedBy) || undefined,\n    invalid: !!errorText || !!parentInvalid\n  };\n  return React.createElement(\"div\", __assign({}, baseProps, {\n    className: clsx(baseProps.className, styles.root),\n    ref: __internalRootRef\n  }), React.createElement(\"div\", {\n    className: clsx(__hideLabel && styles['visually-hidden'])\n  }, label && React.createElement(\"label\", {\n    className: styles.label,\n    id: slotIds.label,\n    htmlFor: generatedControlId\n  }, label), !__hideLabel && info && React.createElement(\"span\", {\n    className: styles.info\n  }, info)), description && React.createElement(\"div\", {\n    className: styles.description,\n    id: slotIds.description\n  }, description), React.createElement(\"div\", {\n    className: clsx(styles.controls, __hideLabel && styles['label-hidden'])\n  }, React.createElement(InternalGrid, {\n    gridDefinition: gridDefinition\n  }, React.createElement(FormFieldContext.Provider, {\n    value: __assign({\n      controlId: generatedControlId\n    }, contextValuesWithoutControlId)\n  }, children && React.createElement(\"div\", {\n    className: styles.control\n  }, children)), secondaryControl && React.createElement(FormFieldContext.Provider, {\n    value: contextValuesWithoutControlId\n  }, React.createElement(\"div\", {\n    className: styles['secondary-control']\n  }, secondaryControl)))), (constraintText || errorText) && React.createElement(\"div\", {\n    className: styles.hints\n  }, errorText && React.createElement(FormFieldError, {\n    id: slotIds.error,\n    errorIconAriaLabel: i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.errorIconAriaLabel\n  }, errorText), constraintText && React.createElement(\"div\", {\n    className: clsx(styles.constraint, errorText && styles['constraint-has-error']),\n    id: slotIds.constraint\n  }, constraintText)));\n}","map":{"version":3,"mappings":"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","names":["React","clsx","getBaseProps","FormFieldContext","useFormFieldContext","useUniqueId","useVisualRefresh","InternalGrid","InternalIcon","getAriaDescribedBy","getGridDefinition","getSlotIds","styles","joinStrings","FormFieldError","_a","id","children","errorIconAriaLabel","className","error","role","name","size","error__message","InternalFormField","_b","stretch","label","info","i18nStrings","secondaryControl","description","constraintText","errorText","__hideLabel","_c","__internalRootRef","rest","baseProps","isRefresh","instanceUniqueId","generatedControlId","controlId","formFieldId","slotIds","ariaDescribedBy","gridDefinition","parentAriaLabelledby","parentAriaDescribedby","parentInvalid","contextValuesWithoutControlId","ariaLabelledby","undefined","ariaDescribedby","invalid","root","ref","htmlFor","controls","Provider","value","control","hints","constraint"],"sources":["/Users/dcastro/node_modules/src/form-field/internal.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\nimport clsx from 'clsx';\n\nimport { getBaseProps } from '../internal/base-component';\nimport { FormFieldContext, useFormFieldContext } from '../internal/context/form-field-context';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\n\nimport InternalGrid from '../grid/internal';\nimport InternalIcon from '../icon/internal';\nimport { getAriaDescribedBy, getGridDefinition, getSlotIds } from './util';\n\nimport styles from './styles.css.js';\nimport { InternalFormFieldProps } from './interfaces';\nimport { joinStrings } from '../internal/utils/strings';\n\ninterface FormFieldErrorProps {\n  id?: string;\n  children?: React.ReactNode;\n  errorIconAriaLabel?: string;\n}\n\nexport const FormFieldError = ({ id, children, errorIconAriaLabel }: FormFieldErrorProps) => (\n  <div className={styles.error}>\n    <div className={styles['error-icon-shake-wrapper']}>\n      <div role=\"img\" aria-label={errorIconAriaLabel} className={styles['error-icon-scale-wrapper']}>\n        <InternalIcon name=\"status-warning\" size=\"small\" />\n      </div>\n    </div>\n    <span id={id} className={styles.error__message}>\n      {children}\n    </span>\n  </div>\n);\n\nexport default function InternalFormField({\n  controlId,\n  stretch = false,\n  label,\n  info,\n  i18nStrings,\n  children,\n  secondaryControl,\n  description,\n  constraintText,\n  errorText,\n  __hideLabel,\n  __internalRootRef = null,\n  ...rest\n}: InternalFormFieldProps) {\n  const baseProps = getBaseProps(rest);\n  const isRefresh = useVisualRefresh();\n\n  const instanceUniqueId = useUniqueId('formField');\n  const generatedControlId = controlId || instanceUniqueId;\n  const formFieldId = controlId || generatedControlId;\n\n  const slotIds = getSlotIds(formFieldId, label, description, constraintText, errorText);\n\n  const ariaDescribedBy = getAriaDescribedBy(slotIds);\n\n  const gridDefinition = getGridDefinition(stretch, !!secondaryControl, isRefresh);\n\n  const {\n    ariaLabelledby: parentAriaLabelledby,\n    ariaDescribedby: parentAriaDescribedby,\n    invalid: parentInvalid,\n  } = useFormFieldContext({});\n\n  const contextValuesWithoutControlId = {\n    ariaLabelledby: joinStrings(parentAriaLabelledby, slotIds.label) || undefined,\n    ariaDescribedby: joinStrings(parentAriaDescribedby, ariaDescribedBy) || undefined,\n    invalid: !!errorText || !!parentInvalid,\n  };\n\n  return (\n    <div {...baseProps} className={clsx(baseProps.className, styles.root)} ref={__internalRootRef}>\n      <div className={clsx(__hideLabel && styles['visually-hidden'])}>\n        {label && (\n          <label className={styles.label} id={slotIds.label} htmlFor={generatedControlId}>\n            {label}\n          </label>\n        )}\n        {!__hideLabel && info && <span className={styles.info}>{info}</span>}\n      </div>\n\n      {description && (\n        <div className={styles.description} id={slotIds.description}>\n          {description}\n        </div>\n      )}\n\n      <div className={clsx(styles.controls, __hideLabel && styles['label-hidden'])}>\n        <InternalGrid gridDefinition={gridDefinition}>\n          <FormFieldContext.Provider\n            value={{\n              controlId: generatedControlId,\n              ...contextValuesWithoutControlId,\n            }}\n          >\n            {children && <div className={styles.control}>{children}</div>}\n          </FormFieldContext.Provider>\n\n          {secondaryControl && (\n            <FormFieldContext.Provider value={contextValuesWithoutControlId}>\n              <div className={styles['secondary-control']}>{secondaryControl}</div>\n            </FormFieldContext.Provider>\n          )}\n        </InternalGrid>\n      </div>\n\n      {(constraintText || errorText) && (\n        <div className={styles.hints}>\n          {errorText && (\n            <FormFieldError id={slotIds.error} errorIconAriaLabel={i18nStrings?.errorIconAriaLabel}>\n              {errorText}\n            </FormFieldError>\n          )}\n          {constraintText && (\n            <div\n              className={clsx(styles.constraint, errorText && styles['constraint-has-error'])}\n              id={slotIds.constraint}\n            >\n              {constraintText}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}