{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport AsyncStore from './async-store';\nvar initialState = Object.freeze({\n  highlightedX: null,\n  highlightedPoint: null,\n  highlightedSeries: null,\n  legendSeries: null,\n  isPopoverPinned: false\n});\nvar InteractionsStore = /** @class */function (_super) {\n  __extends(InteractionsStore, _super);\n  function InteractionsStore(series, plot) {\n    var _this = _super.call(this, initialState) || this;\n    _this.series = series;\n    _this.plot = plot;\n    return _this;\n  }\n  InteractionsStore.prototype.highlightPoint = function (point) {\n    var _this = this;\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        highlightedX: _this.plot.xy[point.index.x],\n        highlightedPoint: point,\n        highlightedSeries: _this.series[point.index.s],\n        legendSeries: _this.series[point.index.s]\n      });\n    });\n  };\n  InteractionsStore.prototype.highlightX = function (points) {\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        highlightedX: points,\n        highlightedPoint: null,\n        highlightedSeries: null\n      });\n    });\n  };\n  InteractionsStore.prototype.highlightFirstPoint = function () {\n    var _this = this;\n    this.set(function (state) {\n      var series = state.legendSeries || state.highlightedSeries;\n      var firstSeriesPoint = series && _this._getFirstSeriesPoint(series);\n      var point = state.highlightedPoint || firstSeriesPoint || _this.plot.sx[0][0];\n      return __assign(__assign({}, state), {\n        highlightedX: _this.plot.xy[point.index.x],\n        highlightedPoint: point,\n        highlightedSeries: _this.series[point.index.s],\n        legendSeries: _this.series[point.index.s]\n      });\n    });\n  };\n  InteractionsStore.prototype.highlightSeries = function (s) {\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        highlightedSeries: s,\n        legendSeries: s\n      });\n    });\n  };\n  InteractionsStore.prototype.clearHighlight = function () {\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        highlightedX: null,\n        highlightedPoint: null,\n        highlightedSeries: null\n      });\n    });\n  };\n  InteractionsStore.prototype.clearHighlightedLegend = function () {\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        legendSeries: null\n      });\n    });\n  };\n  InteractionsStore.prototype.clearState = function () {\n    this.set(function () {\n      return initialState;\n    });\n  };\n  InteractionsStore.prototype.pinPopover = function () {\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        isPopoverPinned: true\n      });\n    });\n  };\n  InteractionsStore.prototype.unpinPopover = function () {\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        isPopoverPinned: false\n      });\n    });\n  };\n  InteractionsStore.prototype.togglePopoverPin = function () {\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        isPopoverPinned: !state.isPopoverPinned\n      });\n    });\n  };\n  InteractionsStore.prototype._getFirstSeriesPoint = function (s) {\n    var seriesIndex = this.series.indexOf(s);\n    var firstSeriesPoint = (this.plot.sx[seriesIndex] || [])[0];\n    return firstSeriesPoint || null;\n  };\n  return InteractionsStore;\n}(AsyncStore);\nexport default InteractionsStore;","map":{"version":3,"mappings":"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","names":["AsyncStore","initialState","Object","freeze","highlightedX","highlightedPoint","highlightedSeries","legendSeries","isPopoverPinned","__extends","series","plot","_super","_this","InteractionsStore","point","set","state","xy","index","x","s","points","firstSeriesPoint","_getFirstSeriesPoint","sx","seriesIndex","indexOf"],"sources":["/Users/dcastro/node_modules/src/area-chart/model/interactions-store.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ChartModel } from './index';\nimport { AreaChartProps } from '../interfaces';\n\nimport AsyncStore from './async-store';\n\nconst initialState = Object.freeze({\n  highlightedX: null,\n  highlightedPoint: null,\n  highlightedSeries: null,\n  legendSeries: null,\n  isPopoverPinned: false,\n});\n\nexport default class InteractionsStore<T extends AreaChartProps.DataTypes> extends AsyncStore<\n  ChartModel.InteractionsState<T>\n> {\n  series: readonly AreaChartProps.Series<T>[];\n  plot: ChartModel.ComputedProps<T>['plot'];\n\n  constructor(series: readonly AreaChartProps.Series<T>[], plot: ChartModel.ComputedProps<T>['plot']) {\n    super(initialState);\n\n    this.series = series;\n    this.plot = plot;\n  }\n\n  highlightPoint(point: ChartModel.PlotPoint<T>) {\n    this.set(state => ({\n      ...state,\n      highlightedX: this.plot.xy[point.index.x],\n      highlightedPoint: point,\n      highlightedSeries: this.series[point.index.s],\n      legendSeries: this.series[point.index.s],\n    }));\n  }\n\n  highlightX(points: readonly ChartModel.PlotPoint<T>[]) {\n    this.set(state => ({\n      ...state,\n      highlightedX: points,\n      highlightedPoint: null,\n      highlightedSeries: null,\n    }));\n  }\n\n  highlightFirstPoint() {\n    this.set(state => {\n      const series = state.legendSeries || state.highlightedSeries;\n      const firstSeriesPoint = series && this._getFirstSeriesPoint(series);\n      const point = state.highlightedPoint || firstSeriesPoint || this.plot.sx[0][0];\n      return {\n        ...state,\n        highlightedX: this.plot.xy[point.index.x],\n        highlightedPoint: point,\n        highlightedSeries: this.series[point.index.s],\n        legendSeries: this.series[point.index.s],\n      };\n    });\n  }\n\n  highlightSeries(s: null | AreaChartProps.Series<T>) {\n    this.set(state => ({\n      ...state,\n      highlightedSeries: s,\n      legendSeries: s,\n    }));\n  }\n\n  clearHighlight() {\n    this.set(state => ({\n      ...state,\n      highlightedX: null,\n      highlightedPoint: null,\n      highlightedSeries: null,\n    }));\n  }\n  clearHighlightedLegend() {\n    this.set(state => ({\n      ...state,\n      legendSeries: null,\n    }));\n  }\n\n  clearState() {\n    this.set(() => initialState);\n  }\n\n  pinPopover() {\n    this.set(state => ({ ...state, isPopoverPinned: true }));\n  }\n\n  unpinPopover() {\n    this.set(state => ({ ...state, isPopoverPinned: false }));\n  }\n\n  togglePopoverPin() {\n    this.set(state => ({ ...state, isPopoverPinned: !state.isPopoverPinned }));\n  }\n\n  _getFirstSeriesPoint(s: AreaChartProps.Series<T>): null | ChartModel.PlotPoint<T> {\n    const seriesIndex = this.series.indexOf(s);\n    const [firstSeriesPoint] = this.plot.sx[seriesIndex] || [];\n    return firstSeriesPoint || null;\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}