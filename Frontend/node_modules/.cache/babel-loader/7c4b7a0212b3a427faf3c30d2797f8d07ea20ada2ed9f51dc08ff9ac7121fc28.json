{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { warnOnce } from '../../internal/logging';\nimport { getWeekStartByLocale } from 'weekstart';\nvar getHtmlElement = function () {\n  return typeof document !== 'undefined' ? document.querySelector('html') : null;\n};\nfunction getBrowserLocale() {\n  return new Intl.DateTimeFormat().resolvedOptions().locale;\n}\nfunction checkLocale(component, locale) {\n  if (!locale || locale === '') {\n    return '';\n  }\n  // Support underscore-delimited locales\n  locale = locale && locale.replace(/^([a-z]{2})_/, '$1-');\n  // Check that the value matches aa-BB pattern\n  // TODO: support full BCP 47 spec?\n  if (locale && !locale.match(/^[a-z]{2}(-[A-Z]{2})?$/)) {\n    warnOnce(component, \"Invalid locale provided: \".concat(locale, \". Falling back to default\"));\n    locale = '';\n  }\n  return locale;\n}\nexport function mergeLocales(locale, fullLocale) {\n  var isShort = locale.length === 2;\n  if (isShort && fullLocale.indexOf(locale) === 0) {\n    return fullLocale;\n  }\n  return locale;\n}\nexport function normalizeLocale(component, locale) {\n  var _a;\n  locale = checkLocale(component, locale);\n  var browserLocale = getBrowserLocale();\n  if (locale) {\n    return mergeLocales(locale, browserLocale);\n  }\n  var htmlLocale = checkLocale(component, (_a = getHtmlElement()) === null || _a === void 0 ? void 0 : _a.getAttribute('lang'));\n  if (htmlLocale) {\n    return mergeLocales(htmlLocale, browserLocale);\n  }\n  return browserLocale;\n}\nexport function normalizeStartOfWeek(startOfWeek, locale) {\n  return typeof startOfWeek === 'number' ? startOfWeek % 7 : getWeekStartByLocale(locale);\n}","map":{"version":3,"mappings":"AAAA;AACA;AACA,SAASA,QAAQ,QAAQ,wBAAwB;AACjD,SAASC,oBAAoB,QAAQ,WAAW;AAGhD,IAAMC,cAAc,GAAG;EAAM,OAAC,OAAOC,QAAQ,KAAK,WAAW,GAAGA,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC,GAAG,IAAI;AAAxE,CAAyE;AAEtG,SAASC,gBAAgB;EACvB,OAAO,IAAIC,IAAI,CAACC,cAAc,EAAE,CAACC,eAAe,EAAE,CAACC,MAAM;AAC3D;AAEA,SAASC,WAAW,CAACC,SAAiB,EAAEF,MAAiC;EACvE,IAAI,CAACA,MAAM,IAAIA,MAAM,KAAK,EAAE,EAAE;IAC5B,OAAO,EAAE;;EAGX;EACAA,MAAM,GAAGA,MAAM,IAAIA,MAAM,CAACG,OAAO,CAAC,cAAc,EAAE,KAAK,CAAC;EACxD;EACA;EACA,IAAIH,MAAM,IAAI,CAACA,MAAM,CAACI,KAAK,CAAC,wBAAwB,CAAC,EAAE;IACrDb,QAAQ,CAACW,SAAS,EAAE,mCAA4BF,MAAM,8BAA2B,CAAC;IAClFA,MAAM,GAAG,EAAE;;EAEb,OAAOA,MAAM;AACf;AAEA,OAAM,SAAUK,YAAY,CAACL,MAAc,EAAEM,UAAkB;EAC7D,IAAMC,OAAO,GAAGP,MAAM,CAACQ,MAAM,KAAK,CAAC;EACnC,IAAID,OAAO,IAAID,UAAU,CAACG,OAAO,CAACT,MAAM,CAAC,KAAK,CAAC,EAAE;IAC/C,OAAOM,UAAU;;EAEnB,OAAON,MAAM;AACf;AAEA,OAAM,SAAUU,eAAe,CAACR,SAAiB,EAAEF,MAAqB;;EACtEA,MAAM,GAAGC,WAAW,CAACC,SAAS,EAAEF,MAAM,CAAC;EACvC,IAAMW,aAAa,GAAGf,gBAAgB,EAAE;EACxC,IAAII,MAAM,EAAE;IACV,OAAOK,YAAY,CAACL,MAAM,EAAEW,aAAa,CAAC;;EAE5C,IAAMC,UAAU,GAAGX,WAAW,CAACC,SAAS,EAAE,oBAAc,EAAE,0CAAEW,YAAY,CAAC,MAAM,CAAC,CAAC;EACjF,IAAID,UAAU,EAAE;IACd,OAAOP,YAAY,CAACO,UAAU,EAAED,aAAa,CAAC;;EAEhD,OAAOA,aAAa;AACtB;AAEA,OAAM,SAAUG,oBAAoB,CAACC,WAA+B,EAAEf,MAAc;EAClF,OAAQ,OAAOe,WAAW,KAAK,QAAQ,GAAGA,WAAW,GAAG,CAAC,GAAGvB,oBAAoB,CAACQ,MAAM,CAAC;AAC1F","names":["warnOnce","getWeekStartByLocale","getHtmlElement","document","querySelector","getBrowserLocale","Intl","DateTimeFormat","resolvedOptions","locale","checkLocale","component","replace","match","mergeLocales","fullLocale","isShort","length","indexOf","normalizeLocale","browserLocale","htmlLocale","getAttribute","normalizeStartOfWeek","startOfWeek"],"sources":["/Users/dcastro/node_modules/src/calendar/utils/locales.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { warnOnce } from '../../internal/logging';\nimport { getWeekStartByLocale } from 'weekstart';\nimport { DayIndex } from '../internal';\n\nconst getHtmlElement = () => (typeof document !== 'undefined' ? document.querySelector('html') : null);\n\nfunction getBrowserLocale() {\n  return new Intl.DateTimeFormat().resolvedOptions().locale;\n}\n\nfunction checkLocale(component: string, locale: string | null | undefined): string {\n  if (!locale || locale === '') {\n    return '';\n  }\n\n  // Support underscore-delimited locales\n  locale = locale && locale.replace(/^([a-z]{2})_/, '$1-');\n  // Check that the value matches aa-BB pattern\n  // TODO: support full BCP 47 spec?\n  if (locale && !locale.match(/^[a-z]{2}(-[A-Z]{2})?$/)) {\n    warnOnce(component, `Invalid locale provided: ${locale}. Falling back to default`);\n    locale = '';\n  }\n  return locale;\n}\n\nexport function mergeLocales(locale: string, fullLocale: string) {\n  const isShort = locale.length === 2;\n  if (isShort && fullLocale.indexOf(locale) === 0) {\n    return fullLocale;\n  }\n  return locale;\n}\n\nexport function normalizeLocale(component: string, locale: string | null): string {\n  locale = checkLocale(component, locale);\n  const browserLocale = getBrowserLocale();\n  if (locale) {\n    return mergeLocales(locale, browserLocale);\n  }\n  const htmlLocale = checkLocale(component, getHtmlElement()?.getAttribute('lang'));\n  if (htmlLocale) {\n    return mergeLocales(htmlLocale, browserLocale);\n  }\n  return browserLocale;\n}\n\nexport function normalizeStartOfWeek(startOfWeek: number | undefined, locale: string) {\n  return (typeof startOfWeek === 'number' ? startOfWeek % 7 : getWeekStartByLocale(locale)) as DayIndex;\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}