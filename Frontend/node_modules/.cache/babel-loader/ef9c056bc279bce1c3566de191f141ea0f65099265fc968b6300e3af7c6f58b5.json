{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect } from 'react';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { useDebounceCallback } from '../internal/hooks/use-debounce-callback';\nimport { useStableEventHandler } from '../internal/hooks/use-stable-event-handler';\nexport function useChangeEffect(editor, onChange, onDelayedChange) {\n  var debouncedChangeHandler = useDebounceCallback(function (detail) {\n    fireNonCancelableEvent(onDelayedChange, detail);\n  }, 0);\n  var handleChange = useStableEventHandler(function () {\n    var changeDetail = {\n      value: (editor === null || editor === void 0 ? void 0 : editor.getValue()) || ''\n    };\n    fireNonCancelableEvent(onChange, changeDetail);\n    debouncedChangeHandler(changeDetail);\n  });\n  useEffect(function () {\n    if (!editor) {\n      return;\n    }\n    editor.on('change', handleChange);\n    return function () {\n      return editor.off('change', handleChange);\n    };\n  }, [editor, handleChange]);\n}","map":{"version":3,"mappings":"AAAA;AACA;AACA,SAASA,SAAS,QAAQ,OAAO;AAGjC,SAASC,sBAAsB,QAAmC,oBAAoB;AACtF,SAASC,mBAAmB,QAAQ,yCAAyC;AAC7E,SAASC,qBAAqB,QAAQ,4CAA4C;AAElF,OAAM,SAAUC,eAAe,CAC7BC,MAAmB,EACnBC,QAAkE,EAClEC,eAAyE;EAEzE,IAAMC,sBAAsB,GAAGN,mBAAmB,CAAC,UAACO,MAAoC;IACtFR,sBAAsB,CAACM,eAAe,EAAEE,MAAM,CAAC;EACjD,CAAC,EAAE,CAAC,CAAC;EACL,IAAMC,YAAY,GAAGP,qBAAqB,CAAC;IACzC,IAAMQ,YAAY,GAAG;MAAEC,KAAK,EAAE,OAAM,aAANP,MAAM,uBAANA,MAAM,CAAEQ,QAAQ,EAAE,KAAI;IAAE,CAAE;IACxDZ,sBAAsB,CAACK,QAAQ,EAAEK,YAAY,CAAC;IAC9CH,sBAAsB,CAACG,YAAY,CAAC;EACtC,CAAC,CAAC;EACFX,SAAS,CAAC;IACR,IAAI,CAACK,MAAM,EAAE;MACX;;IAGFA,MAAM,CAACS,EAAE,CAAC,QAAQ,EAAEJ,YAAY,CAAC;IACjC,OAAO;MAAM,aAAM,CAACK,GAAG,CAAC,QAAQ,EAAEL,YAAY,CAAC;IAAlC,CAAkC;EACjD,CAAC,EAAE,CAACL,MAAM,EAAEK,YAAY,CAAC,CAAC;AAC5B","names":["useEffect","fireNonCancelableEvent","useDebounceCallback","useStableEventHandler","useChangeEffect","editor","onChange","onDelayedChange","debouncedChangeHandler","detail","handleChange","changeDetail","value","getValue","on","off"],"sources":["/Users/dcastro/node_modules/src/code-editor/listeners.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect } from 'react';\nimport { Ace } from 'ace-builds';\nimport { CodeEditorProps } from './interfaces';\nimport { fireNonCancelableEvent, NonCancelableEventHandler } from '../internal/events';\nimport { useDebounceCallback } from '../internal/hooks/use-debounce-callback';\nimport { useStableEventHandler } from '../internal/hooks/use-stable-event-handler';\n\nexport function useChangeEffect(\n  editor?: Ace.Editor,\n  onChange?: NonCancelableEventHandler<CodeEditorProps.ChangeDetail>,\n  onDelayedChange?: NonCancelableEventHandler<CodeEditorProps.ChangeDetail>\n) {\n  const debouncedChangeHandler = useDebounceCallback((detail: CodeEditorProps.ChangeDetail) => {\n    fireNonCancelableEvent(onDelayedChange, detail);\n  }, 0);\n  const handleChange = useStableEventHandler(() => {\n    const changeDetail = { value: editor?.getValue() || '' };\n    fireNonCancelableEvent(onChange, changeDetail);\n    debouncedChangeHandler(changeDetail);\n  });\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    editor.on('change', handleChange);\n    return () => editor.off('change', handleChange);\n  }, [editor, handleChange]);\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}