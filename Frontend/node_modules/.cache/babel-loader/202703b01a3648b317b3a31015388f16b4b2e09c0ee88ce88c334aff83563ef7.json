{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useMemo } from 'react';\nimport clsx from 'clsx';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport LineSeries from './line-series';\nimport BarSeries from './bar-series';\nimport styles from './styles.css.js';\nimport { calculateOffsetMaps } from './utils';\nexport default function DataSeries(_a) {\n  var axis = _a.axis,\n    plotHeight = _a.plotHeight,\n    plotWidth = _a.plotWidth,\n    highlightedGroupIndex = _a.highlightedGroupIndex,\n    highlightedSeries = _a.highlightedSeries,\n    stackedBars = _a.stackedBars,\n    isGroupNavigation = _a.isGroupNavigation,\n    visibleSeries = _a.visibleSeries,\n    xScale = _a.xScale,\n    yScale = _a.yScale;\n  var chartAreaClipPath = useUniqueId('awsui-mixed-line-bar-chart__chart-area-');\n  var stackedBarOffsetMaps = useMemo(function () {\n    if (!stackedBars) {\n      return [];\n    }\n    var barData = [];\n    visibleSeries.forEach(function (_a) {\n      var series = _a.series;\n      if (series.type === 'bar') {\n        barData.push(series.data);\n      }\n    });\n    return calculateOffsetMaps(barData);\n  }, [visibleSeries, stackedBars]);\n  return React.createElement(React.Fragment, null, React.createElement(\"defs\", {\n    \"aria-hidden\": \"true\"\n  }, React.createElement(\"clipPath\", {\n    id: chartAreaClipPath\n  }, React.createElement(\"rect\", {\n    x: 0,\n    y: 0,\n    width: plotWidth,\n    height: plotHeight\n  }))), React.createElement(\"g\", {\n    \"aria-hidden\": isGroupNavigation ? true : undefined,\n    role: \"group\"\n  }, visibleSeries.map(function (_a, index) {\n    var _b;\n    var series = _a.series,\n      color = _a.color;\n    var isHighlighted = series === highlightedSeries;\n    var isDimmed = !!highlightedSeries && !isHighlighted;\n    switch (series.type) {\n      case 'line':\n      case 'threshold':\n        {\n          return React.createElement(\"g\", {\n            key: index,\n            role: \"group\",\n            \"aria-label\": series.title,\n            className: clsx(styles.series, styles[\"series--\".concat(series.type)], (_b = {}, _b[styles['series--highlighted']] = isHighlighted, _b[styles['series--dimmed']] = isDimmed, _b))\n          }, React.createElement(LineSeries, {\n            axis: axis,\n            series: series,\n            color: color,\n            xScale: xScale,\n            yScale: yScale,\n            chartAreaClipPath: chartAreaClipPath\n          }));\n        }\n      case 'bar':\n        return React.createElement(BarSeries, {\n          key: index,\n          axis: axis,\n          series: series,\n          color: color,\n          totalSeriesCount: visibleSeries.filter(function (s) {\n            return s.series.type === 'bar';\n          }).length,\n          seriesIndex: index,\n          xScale: xScale,\n          yScale: yScale,\n          plotSize: axis === 'y' ? plotWidth : plotHeight,\n          highlighted: isHighlighted,\n          dimmed: isDimmed,\n          chartAreaClipPath: chartAreaClipPath,\n          stackedBarOffsets: stackedBarOffsetMaps[index],\n          highlightedGroupIndex: highlightedGroupIndex\n        });\n    }\n  })));\n}","map":{"version":3,"mappings":"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","names":["React","useMemo","clsx","useUniqueId","LineSeries","BarSeries","styles","calculateOffsetMaps","DataSeries","_a","axis","plotHeight","plotWidth","highlightedGroupIndex","highlightedSeries","stackedBars","isGroupNavigation","visibleSeries","xScale","yScale","chartAreaClipPath","stackedBarOffsetMaps","barData","forEach","series","type","push","data","id","x","y","width","height","undefined","role","map","index","color","isHighlighted","isDimmed","key","title","className","_b","totalSeriesCount","filter","length","seriesIndex","plotSize","highlighted","dimmed","stackedBarOffsets"],"sources":["/Users/dcastro/node_modules/src/mixed-line-bar-chart/data-series.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useMemo } from 'react';\nimport clsx from 'clsx';\n\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport { ChartScale, NumericChartScale } from '../internal/components/cartesian-chart/scales';\nimport LineSeries from './line-series';\nimport BarSeries from './bar-series';\nimport { ChartDataTypes, InternalChartSeries, MixedLineBarChartProps } from './interfaces';\n\nimport styles from './styles.css.js';\nimport { calculateOffsetMaps, StackedOffsets } from './utils';\n\nexport interface DataSeriesProps<T> {\n  axis: 'x' | 'y';\n\n  plotHeight: number;\n  plotWidth: number;\n\n  highlightedSeries: MixedLineBarChartProps.ChartSeries<T> | null;\n  highlightedGroupIndex: number | null;\n\n  stackedBars: boolean;\n  isGroupNavigation: boolean;\n\n  visibleSeries: ReadonlyArray<InternalChartSeries<T>>;\n  xScale: ChartScale;\n  yScale: NumericChartScale;\n}\n\nexport default function DataSeries<T extends ChartDataTypes>({\n  axis,\n  plotHeight,\n  plotWidth,\n  highlightedGroupIndex,\n  highlightedSeries,\n  stackedBars,\n  isGroupNavigation,\n  visibleSeries,\n  xScale,\n  yScale,\n}: DataSeriesProps<T>) {\n  const chartAreaClipPath = useUniqueId('awsui-mixed-line-bar-chart__chart-area-');\n\n  const stackedBarOffsetMaps: StackedOffsets[] = useMemo(() => {\n    if (!stackedBars) {\n      return [];\n    }\n\n    const barData: Array<readonly MixedLineBarChartProps.Datum<ChartDataTypes>[]> = [];\n    visibleSeries.forEach(({ series }) => {\n      if (series.type === 'bar') {\n        barData.push(series.data);\n      }\n    });\n    return calculateOffsetMaps(barData);\n  }, [visibleSeries, stackedBars]);\n\n  return (\n    <>\n      <defs aria-hidden=\"true\">\n        <clipPath id={chartAreaClipPath}>\n          <rect x={0} y={0} width={plotWidth} height={plotHeight} />\n        </clipPath>\n      </defs>\n      <g aria-hidden={isGroupNavigation ? true : undefined} role=\"group\">\n        {visibleSeries.map(({ series, color }, index) => {\n          const isHighlighted = series === highlightedSeries;\n          const isDimmed = !!highlightedSeries && !isHighlighted;\n\n          switch (series.type) {\n            case 'line':\n            case 'threshold': {\n              return (\n                <g\n                  key={index}\n                  role=\"group\"\n                  aria-label={series.title}\n                  className={clsx(styles.series, styles[`series--${series.type}`], {\n                    [styles['series--highlighted']]: isHighlighted,\n                    [styles['series--dimmed']]: isDimmed,\n                  })}\n                >\n                  <LineSeries\n                    axis={axis}\n                    series={series}\n                    color={color}\n                    xScale={xScale}\n                    yScale={yScale}\n                    chartAreaClipPath={chartAreaClipPath}\n                  />\n                </g>\n              );\n            }\n\n            case 'bar':\n              return (\n                <BarSeries\n                  key={index}\n                  axis={axis}\n                  series={series}\n                  color={color}\n                  totalSeriesCount={visibleSeries.filter(s => s.series.type === 'bar').length}\n                  seriesIndex={index}\n                  xScale={xScale}\n                  yScale={yScale}\n                  plotSize={axis === 'y' ? plotWidth : plotHeight}\n                  highlighted={isHighlighted}\n                  dimmed={isDimmed}\n                  chartAreaClipPath={chartAreaClipPath}\n                  stackedBarOffsets={stackedBarOffsetMaps[index]}\n                  highlightedGroupIndex={highlightedGroupIndex}\n                />\n              );\n          }\n        })}\n      </g>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}