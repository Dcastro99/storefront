{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useRef } from 'react';\nimport { fireNonCancelableEvent } from '../../internal/events';\nexport var useLoadItems = function (_a) {\n  var onLoadItems = _a.onLoadItems,\n    options = _a.options,\n    statusType = _a.statusType;\n  var prevFilteringText = useRef(undefined);\n  var fireLoadItems = function (filteringText) {\n    if (prevFilteringText.current === filteringText) {\n      return;\n    }\n    prevFilteringText.current = filteringText;\n    fireNonCancelableEvent(onLoadItems, {\n      filteringText: filteringText,\n      firstPage: true,\n      samePage: false\n    });\n  };\n  var handleLoadMore = function () {\n    var firstPage = options.length === 0;\n    statusType === 'pending' && fireNonCancelableEvent(onLoadItems, {\n      firstPage: firstPage,\n      samePage: false,\n      filteringText: prevFilteringText.current || ''\n    });\n  };\n  var handleRecoveryClick = function () {\n    return fireNonCancelableEvent(onLoadItems, {\n      firstPage: false,\n      samePage: true,\n      filteringText: prevFilteringText.current || ''\n    });\n  };\n  return {\n    fireLoadItems: fireLoadItems,\n    handleLoadMore: handleLoadMore,\n    handleRecoveryClick: handleRecoveryClick\n  };\n};","map":{"version":3,"mappings":"AAAA;AACA;AACA,SAASA,MAAM,QAAQ,OAAO;AAC9B,SAASC,sBAAsB,QAAQ,uBAAuB;AAW9D,OAAO,IAAMC,YAAY,GAAG,UAACC,EAAuD;MAArDC,WAAW;IAAEC,OAAO;IAAEC,UAAU;EAC7D,IAAMC,iBAAiB,GAAGP,MAAM,CAAqBQ,SAAS,CAAC;EAE/D,IAAMC,aAAa,GAAG,UAACC,aAAqB;IAC1C,IAAIH,iBAAiB,CAACI,OAAO,KAAKD,aAAa,EAAE;MAC/C;;IAEFH,iBAAiB,CAACI,OAAO,GAAGD,aAAa;IACzCT,sBAAsB,CAACG,WAAW,EAAE;MAAEM,aAAa;MAAEE,SAAS,EAAE,IAAI;MAAEC,QAAQ,EAAE;IAAK,CAAE,CAAC;EAC1F,CAAC;EAED,IAAMC,cAAc,GAAG;IACrB,IAAMF,SAAS,GAAGP,OAAO,CAACU,MAAM,KAAK,CAAC;IACtCT,UAAU,KAAK,SAAS,IACtBL,sBAAsB,CAACG,WAAW,EAAE;MAClCQ,SAAS;MACTC,QAAQ,EAAE,KAAK;MACfH,aAAa,EAAEH,iBAAiB,CAACI,OAAO,IAAI;KAC7C,CAAC;EACN,CAAC;EAED,IAAMK,mBAAmB,GAAG;IAC1B,6BAAsB,CAACZ,WAAW,EAAE;MAClCQ,SAAS,EAAE,KAAK;MAChBC,QAAQ,EAAE,IAAI;MACdH,aAAa,EAAEH,iBAAiB,CAACI,OAAO,IAAI;KAC7C,CAAC;EAJF,CAIE;EAEJ,OAAO;IACLF,aAAa;IACbK,cAAc;IACdE,mBAAmB;GACpB;AACH,CAAC","names":["useRef","fireNonCancelableEvent","useLoadItems","_a","onLoadItems","options","statusType","prevFilteringText","undefined","fireLoadItems","filteringText","current","firstPage","samePage","handleLoadMore","length","handleRecoveryClick"],"sources":["/Users/dcastro/node_modules/src/select/utils/use-load-items.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useRef } from 'react';\nimport { fireNonCancelableEvent } from '../../internal/events';\nimport { SelectProps } from '../interfaces';\nimport { OptionDefinition, OptionGroup } from '../../internal/components/option/interfaces';\nimport { DropdownStatusProps } from '../../internal/components/dropdown-status';\n\ninterface UseLoadItemsProps {\n  onLoadItems: SelectProps['onLoadItems'];\n  options: ReadonlyArray<OptionDefinition | OptionGroup>;\n  statusType: DropdownStatusProps.StatusType;\n}\n\nexport const useLoadItems = ({ onLoadItems, options, statusType }: UseLoadItemsProps) => {\n  const prevFilteringText = useRef<string | undefined>(undefined);\n\n  const fireLoadItems = (filteringText: string) => {\n    if (prevFilteringText.current === filteringText) {\n      return;\n    }\n    prevFilteringText.current = filteringText;\n    fireNonCancelableEvent(onLoadItems, { filteringText, firstPage: true, samePage: false });\n  };\n\n  const handleLoadMore = () => {\n    const firstPage = options.length === 0;\n    statusType === 'pending' &&\n      fireNonCancelableEvent(onLoadItems, {\n        firstPage,\n        samePage: false,\n        filteringText: prevFilteringText.current || '',\n      });\n  };\n\n  const handleRecoveryClick = () =>\n    fireNonCancelableEvent(onLoadItems, {\n      firstPage: false,\n      samePage: true,\n      filteringText: prevFilteringText.current || '',\n    });\n\n  return {\n    fireLoadItems,\n    handleLoadMore,\n    handleRecoveryClick,\n  };\n};\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}