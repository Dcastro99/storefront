{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useCallback, useEffect } from 'react';\nimport { fireNonCancelableEvent } from '../../internal/events';\nimport { useControllable } from '../../internal/hooks/use-controllable';\n// Provides controlled or uncontrolled props to filter chart series.\nexport default function useFilterProps(series, controlledVisibleSeries, controlledOnVisibleChange) {\n  var _a = useControllable(controlledVisibleSeries, controlledOnVisibleChange, series, {\n      componentName: 'AreaChart',\n      controlledProp: 'visibleSeries',\n      changeHandler: 'onFilterChange'\n    }),\n    _b = _a[0],\n    visibleSeries = _b === void 0 ? [] : _b,\n    setVisibleSeriesState = _a[1];\n  var setVisibleSeries = useCallback(function (selectedSeries) {\n    setVisibleSeriesState(selectedSeries);\n    fireNonCancelableEvent(controlledOnVisibleChange, {\n      visibleSeries: selectedSeries\n    });\n  }, [controlledOnVisibleChange, setVisibleSeriesState]);\n  // Reset filter if series change.\n  useEffect(function () {\n    var newVisibleSeries = visibleSeries.filter(function (s) {\n      return series.indexOf(s) !== -1;\n    });\n    if (newVisibleSeries.length !== visibleSeries.length) {\n      setVisibleSeries(newVisibleSeries);\n    }\n  }, [series, visibleSeries, setVisibleSeries]);\n  return [visibleSeries, setVisibleSeries];\n}","map":{"version":3,"mappings":"AAAA;AACA;AACA,SAASA,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAC9C,SAASC,sBAAsB,QAAmC,uBAAuB;AACzF,SAASC,eAAe,QAAQ,uCAAuC;AAKvE;AACA,eAAc,SAAUC,cAAc,CACpCC,MAA2C,EAC3CC,uBAA6D,EAC7DC,yBAA2F;EAErF,SAA8CJ,eAAe,CACjEG,uBAAuB,EACvBC,yBAAyB,EACzBF,MAAM,EACN;MACEG,aAAa,EAAE,WAAW;MAC1BC,cAAc,EAAE,eAAe;MAC/BC,aAAa,EAAE;KAChB,CACF;IATMC,UAAkB;IAAlBC,aAAa,mBAAG,EAAE;IAAEC,qBAAqB,QAS/C;EAED,IAAMC,gBAAgB,GAAGd,WAAW,CAClC,UAACe,cAAmD;IAClDF,qBAAqB,CAACE,cAAc,CAAC;IACrCb,sBAAsB,CAACK,yBAAyB,EAAE;MAAEK,aAAa,EAAEG;IAAc,CAAE,CAAC;EACtF,CAAC,EACD,CAACR,yBAAyB,EAAEM,qBAAqB,CAAC,CACnD;EAED;EACAZ,SAAS,CAAC;IACR,IAAMe,gBAAgB,GAAGJ,aAAa,CAACK,MAAM,CAAC,WAAC;MAAI,aAAM,CAACC,OAAO,CAACC,CAAC,CAAC,KAAK,CAAC,CAAC;IAAxB,CAAwB,CAAC;IAE5E,IAAIH,gBAAgB,CAACI,MAAM,KAAKR,aAAa,CAACQ,MAAM,EAAE;MACpDN,gBAAgB,CAACE,gBAAgB,CAAC;;EAEtC,CAAC,EAAE,CAACX,MAAM,EAAEO,aAAa,EAAEE,gBAAgB,CAAC,CAAC;EAE7C,OAAO,CAACF,aAAa,EAAEE,gBAAgB,CAAC;AAC1C","names":["useCallback","useEffect","fireNonCancelableEvent","useControllable","useFilterProps","series","controlledVisibleSeries","controlledOnVisibleChange","componentName","controlledProp","changeHandler","_b","visibleSeries","setVisibleSeriesState","setVisibleSeries","selectedSeries","newVisibleSeries","filter","indexOf","s","length"],"sources":["/Users/dcastro/node_modules/src/area-chart/model/use-filter-props.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useCallback, useEffect } from 'react';\nimport { fireNonCancelableEvent, NonCancelableEventHandler } from '../../internal/events';\nimport { useControllable } from '../../internal/hooks/use-controllable';\nimport { AreaChartProps } from '../interfaces';\n\ntype FilterProps<T> = [readonly AreaChartProps.Series<T>[], (series: readonly AreaChartProps.Series<T>[]) => void];\n\n// Provides controlled or uncontrolled props to filter chart series.\nexport default function useFilterProps<T>(\n  series: readonly AreaChartProps.Series<T>[],\n  controlledVisibleSeries?: readonly AreaChartProps.Series<T>[],\n  controlledOnVisibleChange?: NonCancelableEventHandler<AreaChartProps.FilterChangeDetail<T>>\n): FilterProps<T> {\n  const [visibleSeries = [], setVisibleSeriesState] = useControllable(\n    controlledVisibleSeries,\n    controlledOnVisibleChange,\n    series,\n    {\n      componentName: 'AreaChart',\n      controlledProp: 'visibleSeries',\n      changeHandler: 'onFilterChange',\n    }\n  );\n\n  const setVisibleSeries = useCallback(\n    (selectedSeries: readonly AreaChartProps.Series<T>[]) => {\n      setVisibleSeriesState(selectedSeries);\n      fireNonCancelableEvent(controlledOnVisibleChange, { visibleSeries: selectedSeries });\n    },\n    [controlledOnVisibleChange, setVisibleSeriesState]\n  );\n\n  // Reset filter if series change.\n  useEffect(() => {\n    const newVisibleSeries = visibleSeries.filter(s => series.indexOf(s) !== -1);\n\n    if (newVisibleSeries.length !== visibleSeries.length) {\n      setVisibleSeries(newVisibleSeries);\n    }\n  }, [series, visibleSeries, setVisibleSeries]);\n\n  return [visibleSeries, setVisibleSeries];\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}