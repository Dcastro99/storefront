{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect } from 'react';\nimport { useStableEventHandler } from '../use-stable-event-handler';\nimport { createSingletonHandler } from '../use-singleton-handler';\nvar useMutationSingleton = createSingletonHandler(function (handler) {\n  var observer = new MutationObserver(function () {\n    return handler();\n  });\n  observer.observe(document.body, {\n    attributes: true,\n    subtree: true\n  });\n  return function () {\n    return observer.disconnect();\n  };\n});\n/**\n * Fires onChange with the given target element as an argument every time any DOM node attribute changes.\n *\n * @deprecated The hook has performance implications. Consider alternatives.\n */\nexport function useMutationObserver(elementRef, onChange) {\n  var handler = useStableEventHandler(function () {\n    if (elementRef.current) {\n      onChange(elementRef.current);\n    }\n  });\n  useMutationSingleton(handler);\n  useEffect(function () {\n    handler();\n  }, [handler]);\n}","map":{"version":3,"mappings":"AAAA;AACA;AACA,SAAgBA,SAAS,QAAQ,OAAO;AACxC,SAASC,qBAAqB,QAAQ,6BAA6B;AACnE,SAASC,sBAAsB,QAAQ,0BAA0B;AAEjE,IAAMC,oBAAoB,GAAGD,sBAAsB,CAAO,iBAAO;EAC/D,IAAME,QAAQ,GAAG,IAAIC,gBAAgB,CAAC;IAAM,cAAO,EAAE;EAAT,CAAS,CAAC;EACtDD,QAAQ,CAACE,OAAO,CAACC,QAAQ,CAACC,IAAI,EAAE;IAAEC,UAAU,EAAE,IAAI;IAAEC,OAAO,EAAE;EAAI,CAAE,CAAC;EACpE,OAAO;IAAM,eAAQ,CAACC,UAAU,EAAE;EAArB,CAAqB;AACpC,CAAC,CAAC;AAEF;;;;;AAKA,OAAM,SAAUC,mBAAmB,CACjCC,UAAwC,EACxCC,QAAwC;EAExC,IAAMC,OAAO,GAAGd,qBAAqB,CAAC;IACpC,IAAIY,UAAU,CAACG,OAAO,EAAE;MACtBF,QAAQ,CAACD,UAAU,CAACG,OAAO,CAAC;;EAEhC,CAAC,CAAC;EACFb,oBAAoB,CAACY,OAAO,CAAC;EAE7Bf,SAAS,CAAC;IACRe,OAAO,EAAE;EACX,CAAC,EAAE,CAACA,OAAO,CAAC,CAAC;AACf","names":["useEffect","useStableEventHandler","createSingletonHandler","useMutationSingleton","observer","MutationObserver","observe","document","body","attributes","subtree","disconnect","useMutationObserver","elementRef","onChange","handler","current"],"sources":["/Users/dcastro/node_modules/src/internal/hooks/use-mutation-observer/index.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect } from 'react';\nimport { useStableEventHandler } from '../use-stable-event-handler';\nimport { createSingletonHandler } from '../use-singleton-handler';\n\nconst useMutationSingleton = createSingletonHandler<void>(handler => {\n  const observer = new MutationObserver(() => handler());\n  observer.observe(document.body, { attributes: true, subtree: true });\n  return () => observer.disconnect();\n});\n\n/**\n * Fires onChange with the given target element as an argument every time any DOM node attribute changes.\n *\n * @deprecated The hook has performance implications. Consider alternatives.\n */\nexport function useMutationObserver(\n  elementRef: React.RefObject<HTMLElement>,\n  onChange: (element: HTMLElement) => void\n) {\n  const handler = useStableEventHandler(() => {\n    if (elementRef.current) {\n      onChange(elementRef.current);\n    }\n  });\n  useMutationSingleton(handler);\n\n  useEffect(() => {\n    handler();\n  }, [handler]);\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}