{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { fixupFalsyValues } from './operations/property-filter.js';\nexport function collectionReducer(state, action) {\n  var newState = __assign({}, state);\n  switch (action.type) {\n    case 'selection':\n      newState.selectedItems = action.selectedItems;\n      break;\n    case 'filtering':\n      newState.currentPageIndex = 1;\n      newState.filteringText = action.filteringText;\n      break;\n    case 'sorting':\n      newState.currentPageIndex = 1;\n      newState.sortingState = action.sortingState;\n      break;\n    case 'pagination':\n      newState.currentPageIndex = action.pageIndex;\n      break;\n    case 'property-filtering':\n      newState.currentPageIndex = 1;\n      newState.propertyFilteringQuery = action.query;\n      break;\n  }\n  return newState;\n}\nexport function createActions(_a) {\n  var dispatch = _a.dispatch,\n    collectionRef = _a.collectionRef;\n  return {\n    setFiltering: function (filteringText) {\n      dispatch({\n        type: 'filtering',\n        filteringText: filteringText\n      });\n      collectionRef.current && collectionRef.current.scrollToTop();\n    },\n    setSorting: function (state) {\n      dispatch({\n        type: 'sorting',\n        sortingState: state\n      });\n      collectionRef.current && collectionRef.current.scrollToTop();\n    },\n    setCurrentPage: function (pageIndex) {\n      dispatch({\n        type: 'pagination',\n        pageIndex: pageIndex\n      });\n      collectionRef.current && collectionRef.current.scrollToTop();\n    },\n    setSelectedItems: function (selectedItems) {\n      dispatch({\n        type: 'selection',\n        selectedItems: selectedItems\n      });\n    },\n    setPropertyFiltering: function (query) {\n      dispatch({\n        type: 'property-filtering',\n        query: query\n      });\n      collectionRef.current && collectionRef.current.scrollToTop();\n    }\n  };\n}\nexport function createSyncProps(options, _a, actions, collectionRef, _b) {\n  var _c;\n  var filteringText = _a.filteringText,\n    sortingState = _a.sortingState,\n    selectedItems = _a.selectedItems,\n    currentPageIndex = _a.currentPageIndex,\n    propertyFilteringQuery = _a.propertyFilteringQuery;\n  var pagesCount = _b.pagesCount,\n    actualPageIndex = _b.actualPageIndex,\n    allItems = _b.allItems;\n  var empty = options.filtering ? allItems.length ? options.filtering.noMatch : options.filtering.empty : null;\n  empty = options.propertyFiltering ? allItems.length ? options.propertyFiltering.noMatch : options.propertyFiltering.empty : empty;\n  var filteringOptions = options.propertyFiltering ? options.propertyFiltering.filteringProperties.reduce(function (acc, property) {\n    Object.keys(allItems.reduce(function (acc, item) {\n      acc['' + fixupFalsyValues(item[property.key])] = true;\n      return acc;\n    }, {})).forEach(function (value) {\n      if (value !== '') {\n        acc.push({\n          propertyKey: property.key,\n          value: value\n        });\n      }\n    });\n    return acc;\n  }, []) : [];\n  return {\n    collectionProps: __assign(__assign(__assign({\n      empty: empty\n    }, options.sorting ? {\n      onSortingChange: function (_a) {\n        var detail = _a.detail;\n        actions.setSorting(detail);\n      },\n      sortingColumn: sortingState === null || sortingState === void 0 ? void 0 : sortingState.sortingColumn,\n      sortingDescending: sortingState === null || sortingState === void 0 ? void 0 : sortingState.isDescending\n    } : {}), options.selection ? {\n      onSelectionChange: function (_a) {\n        var selectedItems = _a.detail.selectedItems;\n        actions.setSelectedItems(selectedItems);\n      },\n      selectedItems: selectedItems,\n      trackBy: options.selection.trackBy\n    } : {}), {\n      ref: collectionRef\n    }),\n    filterProps: {\n      filteringText: filteringText,\n      onChange: function (_a) {\n        var filteringText = _a.detail.filteringText;\n        actions.setFiltering(filteringText);\n      }\n    },\n    propertyFilterProps: {\n      query: propertyFilteringQuery,\n      onChange: function (_a) {\n        var query = _a.detail;\n        actions.setPropertyFiltering(query);\n      },\n      filteringProperties: ((_c = options.propertyFiltering) === null || _c === void 0 ? void 0 : _c.filteringProperties) || [],\n      filteringOptions: filteringOptions\n    },\n    paginationProps: {\n      currentPageIndex: actualPageIndex !== null && actualPageIndex !== void 0 ? actualPageIndex : currentPageIndex,\n      // pagesCount is always calculated when options.pagination is present\n      pagesCount: pagesCount,\n      onChange: function (_a) {\n        var currentPageIndex = _a.detail.currentPageIndex;\n        actions.setCurrentPage(currentPageIndex);\n      }\n    }\n  };\n}","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","fixupFalsyValues","collectionReducer","state","action","newState","type","selectedItems","currentPageIndex","filteringText","sortingState","pageIndex","propertyFilteringQuery","query","createActions","_a","dispatch","collectionRef","setFiltering","current","scrollToTop","setSorting","setCurrentPage","setSelectedItems","setPropertyFiltering","createSyncProps","options","actions","_b","_c","pagesCount","actualPageIndex","allItems","empty","filtering","noMatch","propertyFiltering","filteringOptions","filteringProperties","reduce","acc","property","keys","item","key","forEach","value","push","propertyKey","collectionProps","sorting","onSortingChange","detail","sortingColumn","sortingDescending","isDescending","selection","onSelectionChange","trackBy","ref","filterProps","onChange","propertyFilterProps","paginationProps"],"sources":["/Users/dcastro/node_modules/@cloudscape-design/collection-hooks/dist/mjs/utils.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { fixupFalsyValues } from './operations/property-filter.js';\nexport function collectionReducer(state, action) {\n    var newState = __assign({}, state);\n    switch (action.type) {\n        case 'selection':\n            newState.selectedItems = action.selectedItems;\n            break;\n        case 'filtering':\n            newState.currentPageIndex = 1;\n            newState.filteringText = action.filteringText;\n            break;\n        case 'sorting':\n            newState.currentPageIndex = 1;\n            newState.sortingState = action.sortingState;\n            break;\n        case 'pagination':\n            newState.currentPageIndex = action.pageIndex;\n            break;\n        case 'property-filtering':\n            newState.currentPageIndex = 1;\n            newState.propertyFilteringQuery = action.query;\n            break;\n    }\n    return newState;\n}\nexport function createActions(_a) {\n    var dispatch = _a.dispatch, collectionRef = _a.collectionRef;\n    return {\n        setFiltering: function (filteringText) {\n            dispatch({ type: 'filtering', filteringText: filteringText });\n            collectionRef.current && collectionRef.current.scrollToTop();\n        },\n        setSorting: function (state) {\n            dispatch({ type: 'sorting', sortingState: state });\n            collectionRef.current && collectionRef.current.scrollToTop();\n        },\n        setCurrentPage: function (pageIndex) {\n            dispatch({ type: 'pagination', pageIndex: pageIndex });\n            collectionRef.current && collectionRef.current.scrollToTop();\n        },\n        setSelectedItems: function (selectedItems) {\n            dispatch({ type: 'selection', selectedItems: selectedItems });\n        },\n        setPropertyFiltering: function (query) {\n            dispatch({ type: 'property-filtering', query: query });\n            collectionRef.current && collectionRef.current.scrollToTop();\n        },\n    };\n}\nexport function createSyncProps(options, _a, actions, collectionRef, _b) {\n    var _c;\n    var filteringText = _a.filteringText, sortingState = _a.sortingState, selectedItems = _a.selectedItems, currentPageIndex = _a.currentPageIndex, propertyFilteringQuery = _a.propertyFilteringQuery;\n    var pagesCount = _b.pagesCount, actualPageIndex = _b.actualPageIndex, allItems = _b.allItems;\n    var empty = options.filtering\n        ? allItems.length\n            ? options.filtering.noMatch\n            : options.filtering.empty\n        : null;\n    empty = options.propertyFiltering\n        ? allItems.length\n            ? options.propertyFiltering.noMatch\n            : options.propertyFiltering.empty\n        : empty;\n    var filteringOptions = options.propertyFiltering\n        ? options.propertyFiltering.filteringProperties.reduce(function (acc, property) {\n            Object.keys(allItems.reduce(function (acc, item) {\n                acc['' + fixupFalsyValues(item[property.key])] = true;\n                return acc;\n            }, {})).forEach(function (value) {\n                if (value !== '') {\n                    acc.push({\n                        propertyKey: property.key,\n                        value: value,\n                    });\n                }\n            });\n            return acc;\n        }, [])\n        : [];\n    return {\n        collectionProps: __assign(__assign(__assign({ empty: empty }, (options.sorting\n            ? {\n                onSortingChange: function (_a) {\n                    var detail = _a.detail;\n                    actions.setSorting(detail);\n                },\n                sortingColumn: sortingState === null || sortingState === void 0 ? void 0 : sortingState.sortingColumn,\n                sortingDescending: sortingState === null || sortingState === void 0 ? void 0 : sortingState.isDescending,\n            }\n            : {})), (options.selection\n            ? {\n                onSelectionChange: function (_a) {\n                    var selectedItems = _a.detail.selectedItems;\n                    actions.setSelectedItems(selectedItems);\n                },\n                selectedItems: selectedItems,\n                trackBy: options.selection.trackBy,\n            }\n            : {})), { ref: collectionRef }),\n        filterProps: {\n            filteringText: filteringText,\n            onChange: function (_a) {\n                var filteringText = _a.detail.filteringText;\n                actions.setFiltering(filteringText);\n            },\n        },\n        propertyFilterProps: {\n            query: propertyFilteringQuery,\n            onChange: function (_a) {\n                var query = _a.detail;\n                actions.setPropertyFiltering(query);\n            },\n            filteringProperties: ((_c = options.propertyFiltering) === null || _c === void 0 ? void 0 : _c.filteringProperties) || [],\n            filteringOptions: filteringOptions,\n        },\n        paginationProps: {\n            currentPageIndex: actualPageIndex !== null && actualPageIndex !== void 0 ? actualPageIndex : currentPageIndex,\n            // pagesCount is always calculated when options.pagination is present\n            pagesCount: pagesCount,\n            onChange: function (_a) {\n                var currentPageIndex = _a.detail.currentPageIndex;\n                actions.setCurrentPage(currentPageIndex);\n            },\n        },\n    };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}